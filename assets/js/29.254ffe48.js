(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{310:function(t,a,s){"use strict";s.r(a);var n=s(14),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"docsé‡æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docsé‡æ„"}},[t._v("#")]),t._v(" Docsé‡æ„")]),t._v(" "),a("h2",{attrs:{id:"ä¸€ã€èƒŒæ™¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€èƒŒæ™¯"}},[t._v("#")]),t._v(" ä¸€ã€èƒŒæ™¯")]),t._v(" "),a("p",[t._v("Docsé¡¹ç›®æœ‰ä»¥ä¸‹å‡ ç‚¹ä¸»è¦ç—›ç‚¹ï¼š")]),t._v(" "),a("h3",{attrs:{id:"_1-å·¨çŸ³åº”ç”¨ç»´æŠ¤å›°éš¾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-å·¨çŸ³åº”ç”¨ç»´æŠ¤å›°éš¾"}},[t._v("#")]),t._v(" 1. å·¨çŸ³åº”ç”¨ç»´æŠ¤å›°éš¾")]),t._v(" "),a("p",[t._v("é‡‘å±±æ–‡æ¡£ç»è¿‡å¤šå¹´æŒç»­ä¸æ–­çš„è¿­ä»£ï¼Œå·²ç»å˜å¾—å¾ˆåºå¤§ï¼Œé¡¹ç›®æœ¬åœ°æ‰“åŒ…è€—æ—¶30åˆ†é’Ÿï¼Œæ‰“åŒ…åçš„ä¸»æ–‡ä»¶vendor.jsæœ‰7Mï¼Œkso-ui.jsæœ‰6.3Mï¼Œéƒ¨ç½²ä¸Šçº¿è¦è€—è´¹å¤§åŠå¤©æ—¶é—´ï¼Œå¤´ä¸€å›é‡åˆ°è¿™ç§å·¨çŸ³åº”ç”¨ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_2-å¼€å‘æµç¨‹å¤æ‚"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-å¼€å‘æµç¨‹å¤æ‚"}},[t._v("#")]),t._v(" 2. å¼€å‘æµç¨‹å¤æ‚")]),t._v(" "),a("p",[t._v("æ— æ³•æœ¬åœ°è¿è¡Œå¼€å‘ï¼Œé‡åˆ°å¤æ‚éœ€æ±‚å’Œbugéœ€è¦åå¤ä¿®æ”¹å’Œåå¤éƒ¨ç½²ï¼Œæ•ˆç‡éå¸¸ä½ã€‚ä¾‹å¦‚ï¼šä¿®æ”¹ksoé‡Œé¢çš„bugï¼Œæ”¹ksoä»£ç  -> ç§æœ‰åŒ–(jenkins) -> ksoå‘åŒ… -> cloud/mobileç§æœ‰åŒ– -> éƒ¨ç½²ï¼Œæ•´ä¸ªæµç¨‹èµ°å®Œå¤§æ¦‚2ä¸ªå°æ—¶ã€‚")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/img/recode_01.png")}}),t._v(" "),a("h2",{attrs:{id:"äºŒã€å¾®å‰ç«¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€å¾®å‰ç«¯"}},[t._v("#")]),t._v(" äºŒã€å¾®å‰ç«¯")]),t._v(" "),a("p",[t._v("å¾®å‰ç«¯çš„è¯ç”Ÿä¹Ÿæ˜¯ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_1-ä»€ä¹ˆæ˜¯å¾®å‰ç«¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä»€ä¹ˆæ˜¯å¾®å‰ç«¯"}},[t._v("#")]),t._v(" 1. ä»€ä¹ˆæ˜¯å¾®å‰ç«¯")]),t._v(" "),a("p",[t._v("å¾®å‰ç«¯æ˜¯ä¸€ç§ç±»ä¼¼äºå¾®æœåŠ¡çš„æ¶æ„ï¼Œå®ƒå°†å¾®æœåŠ¡çš„ç†å¿µåº”ç”¨äºæµè§ˆå™¨ç«¯ï¼Œå³å°† Web åº”ç”¨ç”±å•ä¸€çš„å•ä½“åº”ç”¨è½¬å˜ä¸º "),a("strong",[t._v("å¤šä¸ªå°å‹å‰ç«¯åº”ç”¨èšåˆä¸ºä¸€çš„åº”ç”¨")]),t._v(" ã€‚å„ä¸ªå‰ç«¯åº”ç”¨è¿˜å¯ä»¥ "),a("strong",[t._v("ç‹¬ç«‹è¿è¡Œã€ç‹¬ç«‹å¼€å‘ã€ç‹¬ç«‹éƒ¨ç½²")]),t._v(" ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_2-å¾®å‰ç«¯ä¼˜åŠ¿"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-å¾®å‰ç«¯ä¼˜åŠ¿"}},[t._v("#")]),t._v(" 2. å¾®å‰ç«¯ä¼˜åŠ¿")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å¤æ‚åº¦å¯æ§")]),t._v("** ğŸ˜—* æ¯ä¸€ä¸ªUIä¸šåŠ¡æ¨¡å—ç”±ç‹¬ç«‹çš„å‰ç«¯å›¢é˜Ÿå¼€å‘ï¼Œé¿å…ä»£ç å·¨æ— éœ¸ï¼Œä¿æŒå¼€å‘æ—¶çš„é«˜é€Ÿç¼–è¯‘ï¼Œä¿æŒè¾ƒä½çš„å¤æ‚åº¦ï¼Œä¾¿äºç»´æŠ¤ä¸å¼€å‘æ•ˆç‡ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("ç‹¬ç«‹éƒ¨ç½²")]),t._v("** ğŸ˜—* æ¯ä¸€ä¸ªæ¨¡å—å¯å•ç‹¬éƒ¨ç½²ï¼Œé¢—ç²’åº¦å¯å°åˆ°å•ä¸ªç»„ä»¶çš„UIç‹¬ç«‹éƒ¨ç½²ï¼Œä¸å¯¹å…¶ä»–æ¨¡å—æœ‰ä»»ä½•å½±å“ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("æŠ€æœ¯é€‰å‹çµæ´»")]),t._v("** ğŸ˜—*ä¹Ÿæ˜¯æœ€å…·å¸å¼•åŠ›çš„ï¼Œåœ¨åŒä¸€é¡¹ç›®ä¸‹å¯ä»¥ä½¿ç”¨å¦‚ä»Šå¸‚é¢ä¸Šæ‰€æœ‰å‰ç«¯æŠ€æœ¯æ ˆvue/react/angular/jquery...")]),t._v(" "),a("li",[a("strong",[t._v("æ‰©å±•")]),t._v("** ğŸ˜—* æ¯ä¸€ä¸ªæœåŠ¡å¯ä»¥ç‹¬ç«‹æ¨ªå‘æ‰©å±•ä»¥æ»¡è¶³ä¸šåŠ¡ä¼¸ç¼©æ€§ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("å®¹é”™")]),t._v("** ğŸ˜—* å•ä¸ªæ¨¡å—å‘ç”Ÿé”™è¯¯ï¼Œä¸å½±å“å…¨å±€ï¼Œå°±è·Ÿåç«¯å¾®æœåŠ¡ä¸€æ ·ã€‚")])]),t._v(" "),a("h3",{attrs:{id:"_3-å¾®å‰ç«¯æ¡†æ¶é€‰æ‹©"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-å¾®å‰ç«¯æ¡†æ¶é€‰æ‹©"}},[t._v("#")]),t._v(" 3. å¾®å‰ç«¯æ¡†æ¶é€‰æ‹©")]),t._v(" "),a("p",[t._v("è°ƒç ”äº†å¸‚é¢ä¸Šå®ç°å¾®å‰ç«¯çš„æ¡†æ¶ï¼Œå¯ä¾›é€‰æ‹©çš„æœ‰iframeã€sigle-spaã€qiankunå’Œ"),a("a",{attrs:{href:"https://micro-zoe.github.io/micro-app",target:"_blank",rel:"noopener noreferrer"}},[t._v("microApp"),a("OutboundLink")],1),t._v("ã€‚single-spaå¤ªè¿‡äºåŸºç¡€ï¼Œå¯¹åŸæœ‰é¡¹ç›®çš„æ”¹é€ è¿‡å¤šï¼Œæˆæœ¬å¤ªé«˜ï¼Œå¯¹é¡¹ç›®çš„å¯ç»´æŠ¤æ€§å¸¦æ¥äº†æŒ‘æˆ˜ï¼› iframeåœ¨æ‰€æœ‰å¾®å‰ç«¯æ–¹æ¡ˆä¸­æ˜¯æœ€ç¨³å®šçš„ã€ä¸Šæ‰‹éš¾åº¦æœ€ä½çš„ï¼Œä½†å®ƒæœ‰ä¸€äº›æ— æ³•è§£å†³çš„é—®é¢˜ï¼Œä¾‹å¦‚æ€§èƒ½ä½ã€é€šä¿¡å¤æ‚ã€åŒæ»šåŠ¨æ¡ã€å¼¹çª—æ— æ³•å…¨å±€è¦†ç›–ï¼Œå®ƒçš„æˆé•¿æ€§ä¸é«˜ï¼Œåªé€‚åˆç®€å•çš„é¡µé¢æ¸²æŸ“ã€‚å‰©ä¸‹çš„åªæœ‰qiankunå’ŒmicroAppäº†ã€‚"),a("a",{attrs:{href:"https://micro-zoe.github.io/micro-app",target:"_blank",rel:"noopener noreferrer"}},[t._v("microApp"),a("OutboundLink")],1),t._v("æ˜¯åŸºäºWebComponentè¿›è¡Œæ¸²æŸ“çš„ï¼Œå¦‚æœåµŒå…¥åˆ°PCå®¢æˆ·ç«¯é‡Œå…¼å®¹æ€§æœ‰é—®é¢˜ï¼Œæœ€ååªå‰©ä¸‹qiankunã€‚")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/img/recode_02.png")}}),t._v(" "),a("h2",{attrs:{id:"ä¸‰ã€qiankun"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€qiankun"}},[t._v("#")]),t._v(" ä¸‰ã€qiankun")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://qiankun.umijs.org/zh",target:"_blank",rel:"noopener noreferrer"}},[t._v("qiankun"),a("OutboundLink")],1),t._v("æ¡†æ¶å…¶å®æ˜¯åŸºäºsingle-spaæ¡†æ¶æ­å»ºè€Œæˆçš„ï¼Œæœ¬è´¨ä¸Šæ˜¯æŠŠ single-spa å’Œ import-html-entry æ•´åˆåœ¨äº†ä¸€èµ·ï¼Œç®€å•æ¥è¯´å°±æ˜¯single-spaçš„ä¼˜åŒ–ç‰ˆã€‚")]),t._v(" "),a("p",[a("em",[t._v("qiankun")]),t._v(" "),a("em",[t._v("æ˜¯ä¸€ä¸ªåŸºäº")]),t._v(" "),a("em",[t._v("single-spa")]),t._v(" "),a("em",[t._v("çš„å¾®å‰ç«¯å®ç°åº“ï¼Œæ—¨åœ¨å¸®åŠ©å¤§å®¶èƒ½æ›´ç®€å•ã€æ— ç—›çš„æ„å»ºä¸€ä¸ªç”Ÿäº§å¯ç”¨å¾®å‰ç«¯æ¶æ„ç³»ç»Ÿã€‚")]),t._v(" "),a("em",[t._v("qiankun")]),t._v(" "),a("em",[t._v("å­µåŒ–è‡ªèš‚èšé‡‘èç§‘æŠ€åŸºäºå¾®å‰ç«¯æ¶æ„çš„äº‘äº§å“ç»Ÿä¸€æ¥å…¥å¹³å°ï¼Œåœ¨ç»è¿‡ä¸€æ‰¹çº¿ä¸Šåº”ç”¨çš„å……åˆ†æ£€éªŒåŠæ‰“ç£¨åï¼Œæˆ‘ä»¬å°†å…¶å¾®å‰ç«¯å†…æ ¸æŠ½å–å‡ºæ¥å¹¶å¼€æºï¼Œå¸Œæœ›èƒ½åŒæ—¶å¸®åŠ©ç¤¾åŒºæœ‰ç±»ä¼¼éœ€æ±‚çš„ç³»ç»Ÿæ›´æ–¹ä¾¿çš„æ„å»ºè‡ªå·±çš„å¾®å‰ç«¯ç³»ç»Ÿï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›é€šè¿‡ç¤¾åŒºçš„å¸®åŠ©å°†")]),t._v(" "),a("em",[t._v("qiankun")]),t._v(" "),a("em",[t._v("æ‰“ç£¨çš„æ›´åŠ æˆç†Ÿå®Œå–„ã€‚ ç›®å‰")]),t._v(" "),a("em",[t._v("qiankun")]),t._v(" "),a("em",[t._v("å·²åœ¨èš‚èšå†…éƒ¨æœåŠ¡äº†è¶…è¿‡")]),t._v(" "),a("em",[t._v("200+")]),t._v(" "),a("em",[t._v("çº¿ä¸Šåº”ç”¨ï¼Œåœ¨æ˜“ç”¨æ€§åŠå®Œå¤‡æ€§ä¸Šï¼Œç»å¯¹æ˜¯å€¼å¾—ä¿¡èµ–çš„ã€‚")]),t._v(" "),a("em",[t._v("---- "),a("strong",[t._v("æ‘˜è‡ª")]),t._v(" qiankun__å®˜ç½‘ä»‹ç»")])]),t._v(" "),a("img",{attrs:{src:t.$withBase("/img/recode_03.png")}}),t._v(" "),a("h2",{attrs:{id:"å››ã€qiankunå®æˆ˜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€qiankunå®æˆ˜"}},[t._v("#")]),t._v(" å››ã€qiankunå®æˆ˜")]),t._v(" "),a("p",[t._v("qiankunæ¶æ„åŸºæœ¬å¯ä»¥æ¦‚æ‹¬ä¸º: åŸºåº§åº”ç”¨ + å­åº”ç”¨ + å…¬å…±ä¾èµ–æ–¹å¼ï¼Œè¯¦ç»†æ¶æ„å¦‚ä¸‹å›¾ï¼š")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/img/recode_04.png")}}),t._v(" "),a("h3",{attrs:{id:"_1-åˆ›å»ºåŸºåº§"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-åˆ›å»ºåŸºåº§"}},[t._v("#")]),t._v(" 1. åˆ›å»ºåŸºåº§")]),t._v(" "),a("p",[t._v("åˆå§‹åŒ–åŸºåº§é¡¹ç›®ï¼Œé€šè¿‡vue-cliå¿«é€Ÿåˆ›å»ºä¸€ä¸ªvueé¡¹ç›®")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("vue create appmain\n")])])]),a("p",[t._v("æ„å»ºä¸»åº”ç”¨åŸºåº§ï¼Œå¼€å§‹è¿›è¡Œæ”¹é€ ï¼Œé¦–å…ˆå®‰è£…qiankun")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("yarn add qiankun\n")])])]),a("p",[t._v('å®‰è£…å®Œqiankunåï¼Œå…ˆå¯¹main.tsè¿›è¡Œæ”¹é€ ï¼Œé’ˆå¯¹ä¸»åº”ç”¨è¿›è¡Œé…ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦å®šä¹‰å¹¶æ³¨å†Œå¾®æœåŠ¡åº”ç”¨ï¼Œå¹¶æ·»åŠ å…¨å±€çŠ¶æ€ç®¡ç†ä¸æ¶ˆæ¯é€šçŸ¥æœºåˆ¶ï¼Œapps.tsæ–‡ä»¶ç”¨äºç»Ÿä¸€å­˜æ”¾å¾®åº”ç”¨çš„ä¿¡æ¯ï¼Œå¾®åº”ç”¨é…ç½®ä¿¡æ¯ä¸­çš„containeræ˜¯ç”¨äºè®¾å®šå¾®åº”ç”¨æŒ‚è½½èŠ‚ç‚¹çš„ï¼Œè¦ä¸è‡ªå·±è®¾å®šçš„èŠ‚ç‚¹<div id="subapp"></div>ä¸­çš„idä¿æŒä¸€è‡´ã€‚')]),t._v(" "),a("p",[t._v("main.tsçš„æ”¹é€ è¿‡ç¨‹:")]),t._v(" "),a("ol",[a("li",[t._v("åˆå§‹åŒ–åŸºåº§åº”ç”¨ vue create mainï¼›")]),t._v(" "),a("li",[t._v("å®‰è£…ä¹¾å¤ yarn add qiankunï¼›")]),t._v(" "),a("li",[t._v("è®¾ç½®å¾®æœåŠ¡åº”ç”¨æŒ‚è½½çš„DOMèŠ‚ç‚¹ï¼Œæ³¨æ„è¿™ä¸ªidéœ€è¦åœ¨æ³¨å†Œå­åº”ç”¨æ—¶ä½¿ç”¨ï¼›")]),t._v(" "),a("li",[t._v("å®šä¹‰å­åº”ç”¨ main\\src\\core\\apps.tsï¼›")]),t._v(" "),a("li",[t._v("æ”¹é€ main.tsï¼Œæ³¨å†Œå­åº”ç”¨å¹¶æ·»åŠ ç›¸å…³å·¥å…·ç±»å‡½æ•°ã€‚")])]),t._v(" "),a("p",[t._v("æ¥ä¸‹æ¥å°±æ˜¯éœ€è¦å®šä¹‰å­åº”ç”¨ï¼Œå¹¶ç¡®ä¿å®šä¹‰çš„å­åº”ç”¨èƒ½åœ¨å½“å‰åŸºåº§åº”ç”¨ä¸‹æˆåŠŸè¿è¡Œã€‚")]),t._v(" "),a("h3",{attrs:{id:"_2-åˆ›å»ºå¾®åº”ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-åˆ›å»ºå¾®åº”ç”¨"}},[t._v("#")]),t._v(" 2. åˆ›å»ºå¾®åº”ç”¨")]),t._v(" "),a("p",[t._v("æ¥å…¥Vueå­åº”ç”¨app1(vue3)")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("vue create app1\n")])])]),a("p",[t._v("æ·»åŠ vue.config.jsï¼Œæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„ï¼š")]),t._v(" "),a("ul",[a("li",[t._v("outputéœ€è¦è®¾ç½®ä¸ºumdæ ¼å¼çš„libraryï¼Œè¿™æ ·ä¸»åº”ç”¨å°±å¯ä»¥åŠ è½½å½“å‰libå¹¶è¿è¡Œã€‚")]),t._v(" "),a("li",[t._v("devServeç«¯å£éœ€è¦è®¾ç½®ä¸æ³¨å†Œè¯¥å­åº”ç”¨æ—¶çš„ç«¯å£ä¸€è‡´, å¹¶è®¾ç½®cors, å› ä¸ºå­åº”ç”¨ä¸ä¸»åº”ç”¨ä¸åŒåŸŸã€‚")])]),t._v(" "),a("p",[t._v("æ”¹é€ å­åº”ç”¨çš„main.tsã€‚å­åº”ç”¨çš„æ¥å…¥éœ€è¦ç¬¦åˆqiankunçš„æ¥å…¥åè®®ï¼Œå­åº”ç”¨ä¸éœ€è¦é¢å¤–å®‰è£…ä»»ä½•å…¶å®ƒä¾èµ–å³å¯æ¥å…¥ä¸»åº”ç”¨ã€‚")]),t._v(" "),a("p",[t._v("å…¶ä»–å¾®åº”ç”¨é…ç½®åŒä¸Šã€‚")]),t._v(" "),a("h3",{attrs:{id:"_3-é¡¹ç›®ç»“æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-é¡¹ç›®ç»“æ„"}},[t._v("#")]),t._v(" 3. é¡¹ç›®ç»“æ„")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("qiankunapp\nâ”œâ”€ app1\nâ”œâ”€ app2\nâ”œâ”€ app3\nâ”œâ”€ app4\nâ”œâ”€ app5\nâ””â”€ appmain\n")])])]),a("h3",{attrs:{id:"_4-åŠŸèƒ½æ¼”ç¤º"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-åŠŸèƒ½æ¼”ç¤º"}},[t._v("#")]),t._v(" 4. åŠŸèƒ½æ¼”ç¤º")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/img/recode_05.png")}}),t._v(" "),a("h2",{attrs:{id:"äº”ã€qiankunæ¥å…¥docs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äº”ã€qiankunæ¥å…¥docs"}},[t._v("#")]),t._v(" äº”ã€qiankunæ¥å…¥Docs")]),t._v(" "),a("h3",{attrs:{id:"_1-æ¥å…¥è¦ç‚¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-æ¥å…¥è¦ç‚¹"}},[t._v("#")]),t._v(" 1. æ¥å…¥è¦ç‚¹")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("åŠ¨æ€è·¯ç”±ç®¡ç†")])])]),t._v(" "),a("p",[t._v("ä½¿å­å·¥ç¨‹ä¹‹é—´æœ‰èƒ½åŠ›äº’é€šåˆ‡æ¢ï¼Œä»¥è·¯ç”±ä¸ºå•ä½æŠŠæ–°æ—§æ¨¡å—é€æ­¥æ›¿æ¢ã€‚")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/img/recode_06.png")}}),t._v(" "),a("ul",[a("li",[a("strong",[t._v("å…¨å±€çŠ¶æ€ç®¡ç†")])])]),t._v(" "),a("p",[t._v("qiankuné€šè¿‡initGlobalState, onGlobalStateChange, setGlobalStateå®ç°ä¸»åº”ç”¨çš„å…¨å±€çŠ¶æ€ç®¡ç†ï¼Œç„¶åé»˜è®¤ä¼šé€šè¿‡propså°†é€šä¿¡æ–¹æ³•ä¼ é€’ç»™å­åº”ç”¨ã€‚å®˜æ–¹ç¤ºä¾‹ç”¨æ³•ï¼š")]),t._v(" "),a("p",[t._v("ä¸»åº”ç”¨ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main/src/main.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" initGlobalState "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'qiankun'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆå§‹åŒ– state")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" initialState "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨æˆ·ä¿¡æ¯")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" actions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initGlobalState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("initialState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nactions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onGlobalStateChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prev")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// state: å˜æ›´åçš„çŠ¶æ€; prev å˜æ›´å‰çš„çŠ¶æ€")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nactions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setGlobalState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nactions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("offGlobalStateChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å­åº”ç”¨ï¼š")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ä»ç”Ÿå‘½å‘¨æœŸ mount ä¸­è·å–é€šä¿¡æ–¹æ³•ï¼Œpropsé»˜è®¤ä¼šæœ‰onGlobalStateChangeå’ŒsetGlobalStateä¸¤ä¸ªapi")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("props")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onGlobalStateChange")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prev")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// state: å˜æ›´åçš„çŠ¶æ€; prev å˜æ›´å‰çš„çŠ¶æ€")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setGlobalState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("çˆ¶å­åº”ç”¨é€šè¿‡onGlobalStateChangeè¿™ä¸ªæ–¹æ³•è¿›è¡Œé€šä¿¡ï¼Œå…¶å®æ˜¯å‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€‚")]),t._v(" "),a("h3",{attrs:{id:"_2-æŠ€æœ¯æ¶æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-æŠ€æœ¯æ¶æ„"}},[t._v("#")]),t._v(" 2. æŠ€æœ¯æ¶æ„")]),t._v(" "),a("p",[t._v("qiankunï¼šåŸºåº§nuxt.js(ssr) + å¾®åº”ç”¨vue/react")]),t._v(" "),a("p",[t._v("è¯¦ç»†æ¶æ„å›¾å¦‚ä¸‹ï¼š")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/img/recode_07.png")}}),t._v(" "),a("h3",{attrs:{id:"_3-docså¾®å‰ç«¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-docså¾®å‰ç«¯"}},[t._v("#")]),t._v(" 3. Docså¾®å‰ç«¯")]),t._v(" "),a("p",[t._v("Docså¾®å‰ç«¯è®¾è®¡å›¾å¦‚ä¸‹ï¼š")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/img/recode_08.png")}})])}),[],!1,null,null,null);a.default=e.exports}}]);